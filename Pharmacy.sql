-- MySQL Script generated by MySQL Workbench
-- Tue Apr  9 23:38:40 2024
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema quanlihieuthuoc
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema quanlihieuthuoc
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `quanlihieuthuoc` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci ;
USE `quanlihieuthuoc` ;

-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`LoaiKhuyenMai`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`LoaiKhuyenMai` (
  `maLoaKM` VARCHAR(255) NOT NULL,
  `moTa` VARCHAR(255) NULL DEFAULT NULL,
  PRIMARY KEY (`maLoaKM`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`ChuongTrinhKhuyenMai`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`ChuongTrinhKhuyenMai` (
  `maCTKM` VARCHAR(255) NOT NULL,
  `maLoaiKM` VARCHAR(255) NOT NULL,
  `tenCTKM` VARCHAR(255) NULL DEFAULT NULL,
  `ngayBatDau` DATE NULL DEFAULT NULL,
  `NgayHetHan` DATE NULL DEFAULT NULL,
  `giamGia` DOUBLE NOT NULL,
  `soTienToiThieu` DOUBLE NOT NULL,
  `soTienToiDa` DOUBLE NOT NULL,
  `tinhTrang` BIT(1) NOT NULL,
  `soLuongMa` INT NOT NULL,
  PRIMARY KEY (`maCTKM`),
  INDEX `fk_chuongtrinhkhuyenmai_loaikhuyenmai1_idx` (`maLoaiKM` ASC) VISIBLE,
  CONSTRAINT `fk_chuongtrinhkhuyenmai_loaikhuyenmai1`
    FOREIGN KEY (`maLoaiKM`)
    REFERENCES `quanlihieuthuoc`.`LoaiKhuyenMai` (`maLoaKM`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`DonViTinh`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`DonViTinh` (
  `maDonViTinh` VARCHAR(255) NOT NULL,
  `tenDonViTinh` VARCHAR(255) NULL DEFAULT NULL,
  PRIMARY KEY (`maDonViTinh`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`ThuongHieu`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`ThuongHieu` (
  `maThuongHieu` VARCHAR(255) NOT NULL,
  `tenThuongHieu` VARCHAR(255) NULL DEFAULT NULL,
  PRIMARY KEY (`maThuongHieu`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`NhomHangHoa`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`NhomHangHoa` (
  `maNhomHang` VARCHAR(255) NOT NULL,
  `tenNhomHang` VARCHAR(255) NULL DEFAULT NULL,
  PRIMARY KEY (`maNhomHang`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`NuocSanXuat`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`NuocSanXuat` (
  `maNuoc` VARCHAR(255) NOT NULL,
  `tenNuoc` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`maNuoc`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`Thuoc`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`Thuoc` (
  `maThuoc` VARCHAR(255) NOT NULL,
  `thuongHieu` VARCHAR(255) NOT NULL,
  `donViTinh` VARCHAR(255) NOT NULL,
  `nhomHangHoa` VARCHAR(255) NOT NULL,
  `chuongTrinhKhuyenMaiEntity` VARCHAR(255) NOT NULL,
  `nuocSanXuat` VARCHAR(255) NOT NULL,
  `tenThuoc` VARCHAR(255) NOT NULL,
  `trangThai` ENUM('DANGBAN', 'HETHANG', 'NGUNGBAN') NULL DEFAULT NULL,
  `hanSuDung` DATE NULL DEFAULT NULL,
  `hoatChatChinh` VARCHAR(255) NULL DEFAULT NULL,
  `khoiLuong` DOUBLE NOT NULL,
  `imgUrl` VARCHAR(255) NULL DEFAULT NULL,
  `donGia` DOUBLE NOT NULL,
  `soLuongTon` INT NOT NULL,
  `thuocKeDon` BIT(1) NOT NULL,
  `quyCachDongGoi` VARCHAR(45) NOT NULL,
  `dieuKienBaoQuan` VARCHAR(45) NULL,
  PRIMARY KEY (`maThuoc`),
  INDEX `FKThuoc907901` (`nhomHangHoa` ASC) VISIBLE,
  INDEX `FKThuoc165328` (`donViTinh` ASC) VISIBLE,
  INDEX `FKThuoc618683` (`thuongHieu` ASC) VISIBLE,
  INDEX `fk_thuoc_chuongtrinhkhuyenmai1_idx` (`chuongTrinhKhuyenMaiEntity` ASC) VISIBLE,
  INDEX `fk_Thuoc_NuocSanXuat1_idx` (`nuocSanXuat` ASC) VISIBLE,
  CONSTRAINT `fk_thuoc_chuongtrinhkhuyenmai1`
    FOREIGN KEY (`chuongTrinhKhuyenMaiEntity`)
    REFERENCES `quanlihieuthuoc`.`ChuongTrinhKhuyenMai` (`maCTKM`),
  CONSTRAINT `FKThuoc165328`
    FOREIGN KEY (`donViTinh`)
    REFERENCES `quanlihieuthuoc`.`DonViTinh` (`maDonViTinh`),
  CONSTRAINT `FKThuoc618683`
    FOREIGN KEY (`thuongHieu`)
    REFERENCES `quanlihieuthuoc`.`ThuongHieu` (`maThuongHieu`),
  CONSTRAINT `FKThuoc907901`
    FOREIGN KEY (`nhomHangHoa`)
    REFERENCES `quanlihieuthuoc`.`NhomHangHoa` (`maNhomHang`),
  CONSTRAINT `fk_Thuoc_NuocSanXuat1`
    FOREIGN KEY (`nuocSanXuat`)
    REFERENCES `quanlihieuthuoc`.`NuocSanXuat` (`maNuoc`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`NhanVien`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`NhanVien` (
  `maNhanVien` VARCHAR(255) NOT NULL,
  `hoTen` VARCHAR(255) NOT NULL,
  `ngaySinh` DATE NOT NULL,
  `diaChi` VARCHAR(255) NULL DEFAULT NULL,
  `ngayVaoLam` DATE NOT NULL,
  `sdt` VARCHAR(255) NOT NULL,
  `chucVu` ENUM('NHANVIEN', 'QUANLY') NULL,
  `gioiTinh` INT NOT NULL,
  `trangThai` ENUM('Đang làm việc', 'Nghỉ việc', 'Nghỉ phép') NULL,
  `email` VARCHAR(255) NULL DEFAULT NULL,
  `caLamViec` ENUM("CA1", "CA2") NOT NULL,
  PRIMARY KEY (`maNhanVien`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`KhachHang`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`KhachHang` (
  `maKH` VARCHAR(255) NOT NULL,
  `hoTen` VARCHAR(255) NOT NULL,
  `gioiTinh` INT NULL,
  `sdt` VARCHAR(255) NOT NULL,
  `ngayThamGia` DATE NULL DEFAULT NULL,
  `diemTichLuy` DOUBLE NOT NULL,
  PRIMARY KEY (`maKH`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`HoaDon`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`HoaDon` (
  `maHD` VARCHAR(255) NOT NULL,
  `chuongTrinhKM` VARCHAR(255) NOT NULL,
  `nhanVien` VARCHAR(255) NOT NULL,
  `khachHang` VARCHAR(255) NOT NULL,
  `tinhTrang` INT NULL DEFAULT NULL,
  `ngayLapHD` DATE NULL DEFAULT NULL,
  `tongTien` DOUBLE NOT NULL,
  `tienKhuyenMai` DOUBLE NOT NULL,
  `tienThanhToan` DOUBLE NOT NULL,
  PRIMARY KEY (`maHD`),
  INDEX `FKHoaDon386877` (`nhanVien` ASC) VISIBLE,
  INDEX `FKHoaDon461189` (`khachHang` ASC) VISIBLE,
  INDEX `fk_hoadon_chuongtrinhkhuyenmai1_idx` (`chuongTrinhKM` ASC) VISIBLE,
  CONSTRAINT `fk_hoadon_chuongtrinhkhuyenmai1`
    FOREIGN KEY (`chuongTrinhKM`)
    REFERENCES `quanlihieuthuoc`.`ChuongTrinhKhuyenMai` (`maCTKM`),
  CONSTRAINT `FKHoaDon386877`
    FOREIGN KEY (`nhanVien`)
    REFERENCES `quanlihieuthuoc`.`NhanVien` (`maNhanVien`),
  CONSTRAINT `FKHoaDon461189`
    FOREIGN KEY (`khachHang`)
    REFERENCES `quanlihieuthuoc`.`KhachHang` (`maKH`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`DoiTra`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`DoiTra` (
  `maDT` VARCHAR(45) NOT NULL,
  `hoaDon` VARCHAR(255) NOT NULL,
  `nhanVien` VARCHAR(255) NOT NULL,
  `hinhThucDoiTra` ENUM('Hoàn trả', 'Đổi mới') NOT NULL,
  PRIMARY KEY (`maDT`),
  INDEX `fk_DoiTra_hoadon1_idx` (`hoaDon` ASC) VISIBLE,
  INDEX `fk_DoiTra_nhanvien1_idx` (`nhanVien` ASC) VISIBLE,
  CONSTRAINT `fk_DoiTra_hoadon1`
    FOREIGN KEY (`hoaDon`)
    REFERENCES `quanlihieuthuoc`.`HoaDon` (`maHD`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_DoiTra_nhanvien1`
    FOREIGN KEY (`nhanVien`)
    REFERENCES `quanlihieuthuoc`.`NhanVien` (`maNhanVien`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`ChiTietDoiTra`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`ChiTietDoiTra` (
  `sanPham` VARCHAR(255) NOT NULL,
  `doiTra` TINYINT NOT NULL,
  `soLuong` INT NOT NULL,
  `giaBan` DOUBLE NOT NULL,
  `thanhTien` DOUBLE NOT NULL,
  `DoiTra_maDT` VARCHAR(45) NOT NULL,
  INDEX `FKChiTietDoi788440` (`sanPham` ASC) VISIBLE,
  INDEX `fk_chitietdoitra_DoiTra1_idx` (`DoiTra_maDT` ASC) VISIBLE,
  CONSTRAINT `FKChiTietDoi788440`
    FOREIGN KEY (`sanPham`)
    REFERENCES `quanlihieuthuoc`.`Thuoc` (`maThuoc`),
  CONSTRAINT `fk_chitietdoitra_DoiTra1`
    FOREIGN KEY (`DoiTra_maDT`)
    REFERENCES `quanlihieuthuoc`.`DoiTra` (`maDT`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`ChiTietHoaDon`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`ChiTietHoaDon` (
  `thuoc` VARCHAR(255) NOT NULL,
  `hoaDon` VARCHAR(255) NOT NULL,
  `soLuong` INT NOT NULL,
  `giaGoc` DOUBLE NOT NULL,
  `giaBan` DOUBLE NOT NULL,
  `thanhTien` DOUBLE NOT NULL,
  PRIMARY KEY (`thuoc`, `hoaDon`),
  INDEX `FKChiTietHoa443020` (`hoaDon` ASC) VISIBLE,
  CONSTRAINT `FKChiTietHoa443020`
    FOREIGN KEY (`hoaDon`)
    REFERENCES `quanlihieuthuoc`.`HoaDon` (`maHD`),
  CONSTRAINT `FKChiTietHoa51375`
    FOREIGN KEY (`thuoc`)
    REFERENCES `quanlihieuthuoc`.`Thuoc` (`maThuoc`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`NhaCungCap`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`NhaCungCap` (
  `maNhaCungCap` VARCHAR(255) NOT NULL,
  `tenNhaCungCap` VARCHAR(255) NOT NULL,
  `diaChi` VARCHAR(255) NOT NULL,
  `soDienThoai` VARCHAR(255) NOT NULL,
  `trangThai` INT NOT NULL,
  PRIMARY KEY (`maNhaCungCap`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`PhieuNhap`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`PhieuNhap` (
  `maPN` VARCHAR(255) NOT NULL,
  `thuoc` VARCHAR(255) NOT NULL,
  `nhaCungCap` VARCHAR(255) NOT NULL,
  `ngayNhap` DATE NULL DEFAULT NULL,
  `soLuongNhap` INT NOT NULL,
  `TongTien` DOUBLE NOT NULL,
  PRIMARY KEY (`maPN`),
  INDEX `FKPhieuNhap250442` (`nhaCungCap` ASC) VISIBLE,
  INDEX `FKPhieuNhap912952` (`thuoc` ASC) VISIBLE,
  CONSTRAINT `FKPhieuNhap250442`
    FOREIGN KEY (`nhaCungCap`)
    REFERENCES `quanlihieuthuoc`.`NhaCungCap` (`maNhaCungCap`),
  CONSTRAINT `FKPhieuNhap912952`
    FOREIGN KEY (`thuoc`)
    REFERENCES `quanlihieuthuoc`.`Thuoc` (`maThuoc`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `quanlihieuthuoc`.`TaiKhoan`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `quanlihieuthuoc`.`TaiKhoan` (
  `nhanVien` VARCHAR(255) NOT NULL,
  `tenTK` VARCHAR(45) NOT NULL,
  `matKhau` VARCHAR(255) NOT NULL,
  `thoiGianDN` DATE NULL DEFAULT NULL,
  `trangThai` INT NULL,
  PRIMARY KEY (`nhanVien`),
  CONSTRAINT `FKTaiKhoan992791`
    FOREIGN KEY (`nhanVien`)
    REFERENCES `quanlihieuthuoc`.`NhanVien` (`maNhanVien`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb3;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
